<html>
  <head>
    <title>Rakudo Perl 6 By Example</title>
    <meta name="keywords" content="perl6,rakudo,p6,example,examples,learning,start,tutorial">
    <meta name="description" content="Learn Perl 6 By Example">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Open+Sans" rel="stylesheet"> 
  </head>
  <body>
    <div id="everything">
      <div id="title">
        <a href="index.html"><img src="rakudo.png"> Rakudo Perl 6 By Example</a>
      </div>
      <div id="github">
        <a href="https://github.com/ijneb/p6byexample">View me on<img alt="GitHub" src="github.svg"></a>
      </div>
      <div id="nav">
        <h1>Examples</h1>
        <ul>
            <li><a href="1.html">1.hello_world</a></li>
            <li><a href="2.html">2.variables</a></li>
            <li><a href="3.html">3.types</a></li>
            <li><a href="4.html">4.conditions</a></li>
            <li><a href="5.html">5.looping</a></li>
            <li><a href="6.html">6.subroutines</a></li>
            <li><a href="7.html">7.arrays</a></li>
            <li><a href="8.html">8.hashes</a></li>
            <li><a href="9.html">9.operators</a></li>
            <li><a href="10.html">10.classes</a></li>
        </ul>
      </div>
      <div id="content">
        
<pre id='vimCodeElement'>
<span class="Comment">## Subroutines</span>
<span class="Comment">##------------</span>

<span class="Comment"># Declaration done with the keyword `sub`.</span>

<span class="Statement">sub</span> shout-greeting { <span class="Special">&quot;</span><span class="Constant">HELLO!!!</span><span class="Special">&quot;</span> }

<span class="Identifier">say</span> shout-greeting<span class="Statement">;</span> <span class="Comment"># HELLO!!!</span>

<span class="Comment"># The last expression of sub is returned implicitly although it can be done</span>
<span class="Comment"># explicitly with the keyword `return`. Also a colon is not necessary after</span>
<span class="Comment"># the last expression in a sub.</span>

<span class="Statement">sub</span> greeting { <span class="Special">return</span> <span class="Special">&quot;</span><span class="Constant">Hello!</span><span class="Special">&quot;</span> }

<span class="Identifier">say</span> greeting<span class="Statement">;</span> <span class="Comment"># Hello!</span>

<span class="Comment">## Parameters of a subroutine</span>
<span class="Comment">##---------------------------</span>

<span class="Comment"># Positional parameters - these are parameters whose meaning is defined by their</span>
<span class="Comment"># position. Positional parameters are required by default but they can be made</span>
<span class="Comment"># optional by using a default value OR appending them with a `?`.</span>

<span class="Statement">sub</span> fullname_v1(<span class="Identifier">$</span><span class="Identifier">fname</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">lname</span>) {
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">fname</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant"> </span><span class="Special">&quot;</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">lname</span><span class="Statement">;</span>
}

<span class="Comment"># say fullname_v1();             # Error</span>
<span class="Identifier">say</span> fullname_v1(<span class="Special">'</span><span class="Constant">Joe</span><span class="Special">'</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Sae</span><span class="Special">'</span>)<span class="Statement">;</span>   <span class="Comment"># 'Joe Sae'</span>

<span class="Statement">sub</span> fullname_v2(<span class="Identifier">$</span><span class="Identifier">fname</span> <span class="Statement">=</span> <span class="Special">'</span><span class="Constant">John</span><span class="Special">'</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">lname</span> <span class="Statement">=</span> <span class="Special">'</span><span class="Constant">Doe</span><span class="Special">'</span>) {  <span class="Comment"># parameters made optional</span>
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">fname</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant"> </span><span class="Special">&quot;</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">lname</span><span class="Statement">;</span>                   <span class="Comment"># with default values</span>
}

<span class="Identifier">say</span> fullname_v2()<span class="Statement">;</span>               <span class="Comment"># 'John Doe'</span>
<span class="Identifier">say</span> fullname_v2(<span class="Special">'</span><span class="Constant">Jonas</span><span class="Special">'</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Eda</span><span class="Special">'</span>)<span class="Statement">;</span> <span class="Comment"># 'Jonas Eda'</span>

<span class="Statement">sub</span> fullname_v3(<span class="Identifier">$</span><span class="Identifier">fname</span><span class="Statement">?,</span> <span class="Identifier">$</span><span class="Identifier">lname</span><span class="Statement">?</span>) {  <span class="Comment"># parameters made optional with `?`</span>
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">fname</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant"> </span><span class="Special">&quot;</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">lname</span>
    <span class="Statement">if</span> <span class="Identifier">$</span><span class="Identifier">fname</span><span class="Statement">.</span><span class="Identifier">defined</span> <span class="Statement">and</span> <span class="Identifier">$</span><span class="Identifier">lname</span><span class="Statement">.</span><span class="Identifier">defined</span><span class="Statement">;</span>
}

<span class="Identifier">say</span> fullname_v3()<span class="Statement">;</span>                <span class="Comment"># ' '</span>
<span class="Identifier">say</span> fullname_v3(<span class="Special">'</span><span class="Constant">Ada</span><span class="Special">'</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Ula</span><span class="Special">'</span>)<span class="Statement">;</span>    <span class="Comment"># 'Ada Ula'</span>

<span class="Comment"># Named parameters - these are parameters whose meaning is defined by their names.</span>
<span class="Comment"># They're created by prepending `:` to their name. They're optional by default</span>
<span class="Comment"># but can be made required by appending them with `!`.</span>

<span class="Statement">sub</span> fullname_v4(<span class="Statement">:</span><span class="Identifier">$</span><span class="Identifier">name</span><span class="Statement">,</span> <span class="Statement">:</span><span class="Identifier">$</span><span class="Identifier">surname</span>) {
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">name</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant"> </span><span class="Special">&quot;</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">surname</span><span class="Statement">;</span>
}

<span class="Identifier">say</span> fullname_v4(<span class="Constant">name</span> <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">Mugen</span><span class="Special">'</span><span class="Statement">,</span> <span class="Constant">surname</span> <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">Eta</span><span class="Special">'</span>)<span class="Statement">;</span> <span class="Comment"># 'Mugen Eta'</span>
<span class="Identifier">say</span> fullname_v4()<span class="Statement">;</span>                                  <span class="Comment"># ' '</span>

<span class="Statement">sub</span> fullname_v5(<span class="Statement">:</span><span class="Identifier">$</span><span class="Identifier">name</span> <span class="Statement">=</span> <span class="Special">'</span><span class="Constant">Jane</span><span class="Special">'</span><span class="Statement">,</span> <span class="Statement">:</span><span class="Identifier">$</span><span class="Identifier">surname</span> <span class="Statement">=</span> <span class="Special">'</span><span class="Constant">Doe</span><span class="Special">'</span>) {
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">name</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant"> </span><span class="Special">&quot;</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">surname</span><span class="Statement">;</span>
}

<span class="Identifier">say</span> fullname_v5(<span class="Constant">name</span> <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">Fuu</span><span class="Special">'</span><span class="Statement">,</span> <span class="Constant">surname</span> <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">Ichi</span><span class="Special">'</span>)<span class="Statement">;</span>  <span class="Comment"># 'Fuu Ichi'</span>
<span class="Identifier">say</span> fullname_v5()<span class="Statement">;</span>                                  <span class="Comment"># 'Jane Doe'</span>

<span class="Statement">sub</span> fullname_v6(<span class="Statement">:</span><span class="Identifier">$</span><span class="Identifier">name</span><span class="Statement">!,</span> <span class="Statement">:</span><span class="Identifier">$</span><span class="Identifier">surname</span><span class="Statement">!</span>) { <span class="Comment"># parameters made required with `!`</span>
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">name</span> <span class="Statement">~</span> <span class="Special">&quot;</span><span class="Constant"> </span><span class="Special">&quot;</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">surname</span><span class="Statement">;</span>
}

<span class="Comment"># say fullname_v6();                                  # Error</span>
<span class="Identifier">say</span> fullname_v6(<span class="Constant">name</span> <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">Jinn</span><span class="Special">'</span><span class="Statement">,</span> <span class="Constant">surname</span> <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">Ngan</span><span class="Special">'</span>)<span class="Statement">;</span> <span class="Comment"># 'Jin Ngan'</span>


<span class="Comment">## Type constraints</span>
<span class="Comment">##-----------------</span>

<span class="Comment"># Typed parameters - The parameters list of a sub can be typed. Besides</span>
<span class="Comment"># specifying a type, a type constraint can be made stricter by specifying if </span>
<span class="Comment"># only defined values are accepted (by using `:D`) or only undefined values </span>
<span class="Comment"># (by using `:U`) for a certain type.  </span>

<span class="Statement">sub</span> multiply(<span class="Type">Int</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Type">Int</span> <span class="Identifier">$</span><span class="Identifier">b</span>) { <span class="Identifier">$</span><span class="Identifier">a</span> <span class="Statement">*</span> <span class="Identifier">$</span><span class="Identifier">b</span> }

<span class="Identifier">say</span> multiply(<span class="Constant">5</span><span class="Statement">,</span> <span class="Constant">3</span>)<span class="Statement">;</span>         <span class="Comment"># 8</span>
<span class="Comment">#say multiply('one', 'two'); # Error</span>

<span class="Statement">sub</span> substract(<span class="Type">Int</span><span class="Statement">:</span><span class="Constant">D</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Type">Int</span><span class="Statement">:</span><span class="Constant">D</span> <span class="Identifier">$</span><span class="Identifier">b</span>) { <span class="Comment"># accept only defined Ints</span>
    <span class="Identifier">$</span><span class="Identifier">a</span> <span class="Statement">-</span> <span class="Identifier">$</span><span class="Identifier">b</span>
}

substract(<span class="Constant">10</span><span class="Statement">,</span> <span class="Constant">15</span>)<span class="Statement">;</span> <span class="Comment"># -5</span>

<span class="Statement">sub</span> only-undef-str(<span class="Type">Str</span><span class="Statement">:</span><span class="Constant">U</span> <span class="Identifier">$</span><span class="Identifier">arg</span>) { <span class="Comment"># accept only undefined Strs, namely Str</span>
    <span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">arg</span>
}

<span class="Identifier">say</span> only-undef-str(<span class="Type">Str</span>)<span class="Statement">;</span> <span class="Comment"># Str</span>
<span class="Identifier">say</span> only-undef-str(<span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span>)<span class="Statement">;</span> <span class="Comment"># Error</span>

<span class="Comment"># Return type - The return type of a subroutine can be specified by using `--&gt;`</span>
<span class="Comment"># followed by the type right after the parameters list. Although there are</span>
<span class="Comment"># other ways of achieving the same thing, this method is the most ubiquitous.</span>

<span class="Statement">sub</span> add2(<span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">b</span> <span class="Statement">--&gt;</span> <span class="Type">Int</span>) { <span class="Comment"># only allowed to return an Int</span>
    <span class="Identifier">$</span><span class="Identifier">a</span> <span class="Statement">+</span> <span class="Identifier">$</span><span class="Identifier">b</span>
}

<span class="Identifier">say</span> add2(<span class="Constant">9</span><span class="Statement">,</span> <span class="Constant">3</span>)<span class="Statement">;</span>     <span class="Comment"># 12</span>
<span class="Identifier">say</span> add2(<span class="Constant">1.1</span><span class="Statement">,</span> <span class="Constant">2.0</span>)<span class="Statement">;</span> <span class="Comment"># Error</span>

<span class="Comment">## Parameter traits</span>
<span class="Comment">##-----------------</span>

<span class="Comment">## Multiple dispatch</span>
<span class="Comment">## -----------------</span>

<span class="Comment"># Subroutines can share the same name but have different signatures. This is </span>
<span class="Comment"># achieved by prepending each sub declaration with `multi`.</span>

<span class="Statement">multi</span> <span class="Statement">sub</span> add(<span class="Type">Int</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Type">Int</span> <span class="Identifier">$</span><span class="Identifier">b</span>) { <span class="Identifier">$</span><span class="Identifier">a</span> <span class="Statement">+</span> <span class="Identifier">$</span><span class="Identifier">b</span><span class="Statement">;</span> }

<span class="Statement">multi</span> <span class="Statement">sub</span> add(<span class="Type">Str</span> <span class="Identifier">$</span><span class="Identifier">a</span><span class="Statement">,</span> <span class="Type">Str</span> <span class="Identifier">$</span><span class="Identifier">b</span>) { <span class="Identifier">$</span><span class="Identifier">a</span> <span class="Statement">~</span> <span class="Identifier">$</span><span class="Identifier">b</span><span class="Statement">;</span> }

<span class="Identifier">say</span> add(<span class="Constant">1</span><span class="Statement">,</span> <span class="Constant">2</span>)<span class="Statement">;</span>      <span class="Comment"># 3</span>
<span class="Identifier">say</span> add(<span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">b</span><span class="Special">'</span>)<span class="Statement">;</span>  <span class="Comment"># ab</span>

<span class="Comment"># When `multi` is used, `sub` can be omitted:</span>

<span class="Statement">multi</span> fact(<span class="Constant">0</span> <span class="Statement">--&gt;</span> <span class="Constant">1</span>) { }
<span class="Statement">multi</span> fact(<span class="Type">Int</span> <span class="Identifier">$</span><span class="Identifier">n</span> <span class="Statement">--&gt;</span> <span class="Type">Int</span>) {
    <span class="Special">return</span> <span class="Identifier">$</span><span class="Identifier">n</span> <span class="Statement">*</span> fact(<span class="Identifier">$</span><span class="Identifier">n</span><span class="Statement">-</span><span class="Constant">1</span>)
}

<span class="Identifier">say</span> fact(<span class="Constant">3</span>)<span class="Statement">;</span> <span class="Comment"># 6</span>

<span class="Comment">## Anonymous subroutines</span>
<span class="Comment">##----------------------</span>

<span class="Comment"># A nameless or anonymous, as they call it, is created by storing a `sub`</span>
<span class="Comment"># with its parameters list and body in a variable.</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">add</span> <span class="Statement">=</span> <span class="Statement">sub</span> (<span class="Type">Int</span><span class="Statement">:</span><span class="Constant">D</span> <span class="Identifier">$</span><span class="Identifier">x</span><span class="Statement">,</span> <span class="Type">Int</span><span class="Statement">:</span><span class="Constant">D</span> <span class="Identifier">$</span><span class="Identifier">y</span>) { <span class="Identifier">$</span><span class="Identifier">x</span> <span class="Statement">+</span> <span class="Identifier">$</span><span class="Identifier">y</span> }

<span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">add</span>(<span class="Constant">10</span><span class="Statement">,</span> <span class="Constant">15</span>)<span class="Statement">;</span> <span class="Comment"># 25</span>

<span class="Comment"># An anonymous sub can also be created using a regular function declaration by</span>
<span class="Comment"># storing it in a variable. In this manner, the function can be called both by</span>
<span class="Comment"># its name and the handle containing it.</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">name-it</span> <span class="Statement">=</span> <span class="Statement">sub</span> name-it(<span class="Type">Str</span> <span class="Identifier">$</span><span class="Identifier">string</span>) { <span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">string</span> }

<span class="Identifier">$</span><span class="Identifier">name-it</span>(<span class="Special">'</span><span class="Constant">dog</span><span class="Special">'</span>)<span class="Statement">;</span> <span class="Comment"># dog</span>
name-it(<span class="Special">'</span><span class="Constant">cat</span><span class="Special">'</span>)<span class="Statement">;</span>  <span class="Comment"># cat</span>

<span class="Comment"># The `anon` keyword can be used to create an anonymous subroutine from a</span>
<span class="Comment"># regular one. However, this forbids calling the sub by its name.</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">hello</span> <span class="Statement">=</span> anon <span class="Statement">sub</span> hello(<span class="Type">Str</span> <span class="Identifier">$</span><span class="Identifier">name</span>) { <span class="Identifier">say</span> <span class="Special">&quot;</span><span class="Constant">Hello, </span><span class="Identifier">$</span><span class="Identifier">name</span><span class="Constant">!</span><span class="Special">&quot;</span> }

<span class="Identifier">$</span><span class="Identifier">hello</span>(<span class="Special">'</span><span class="Constant">Joe</span><span class="Special">'</span>)<span class="Statement">;</span>   <span class="Comment"># works fine</span>
<span class="Comment"># hello('Sachio'); # error!</span>

<span class="Comment"># Instead of anonymous subs, you can utilize anonymous block of codes called </span>
<span class="Comment"># pointy blocks. They are declared with an arrow `-&gt;` and their parameters lists</span>
<span class="Comment"># must be listed without parentheses.</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">repeat-n</span> <span class="Statement">=</span> <span class="Statement">-&gt;</span> <span class="Identifier">$</span><span class="Identifier">str</span><span class="Statement">,</span> <span class="Identifier">$</span><span class="Identifier">n</span> { <span class="Identifier">say</span> <span class="Identifier">$</span><span class="Identifier">str</span> <span class="Statement">x</span> <span class="Identifier">$</span><span class="Identifier">n</span> }

<span class="Identifier">$</span><span class="Identifier">repeat-n</span>(<span class="Special">'</span><span class="Constant">p6</span><span class="Special">'</span><span class="Statement">,</span> <span class="Constant">3</span>)<span class="Statement">;</span> <span class="Comment"># p6p6p6</span>

<span class="Comment"># Blocks can even be more succint by dropping the arrow and using self-declared</span>
<span class="Comment"># positional parameters (placeholders) with the twigil `$^` instead.</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">blocky1</span> <span class="Statement">=</span> { <span class="Identifier">say</span> <span class="Special">&quot;</span><span class="Identifier">$</span><span class="Special">^</span><span class="Identifier">a</span><span class="Constant"> : </span><span class="Identifier">$</span><span class="Special">^</span><span class="Identifier">b</span><span class="Special">&quot;</span> }
<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">blocky2</span> <span class="Statement">=</span> { <span class="Identifier">say</span> <span class="Special">&quot;</span><span class="Identifier">$</span><span class="Special">^</span><span class="Identifier">b</span><span class="Constant"> : </span><span class="Identifier">$</span><span class="Special">^</span><span class="Identifier">a</span><span class="Special">&quot;</span> }

<span class="Identifier">$</span><span class="Identifier">blocky1</span>(<span class="Constant">3</span><span class="Statement">,</span> <span class="Constant">7</span>)<span class="Statement">;</span>     <span class="Comment"># '3 : 7'</span>
<span class="Identifier">$</span><span class="Identifier">blocky2</span>(<span class="Special">'</span><span class="Constant">A</span><span class="Special">'</span><span class="Statement">,</span> <span class="Special">'</span><span class="Constant">Z</span><span class="Special">'</span>)<span class="Statement">;</span> <span class="Comment"># 'Z : A'</span>

<span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">alt-repeat-n</span> <span class="Statement">=</span> { <span class="Identifier">say</span> <span class="Identifier">$</span><span class="Special">^</span><span class="Identifier">a</span> <span class="Statement">x</span> <span class="Identifier">$</span><span class="Special">^</span><span class="Identifier">b</span> }

<span class="Identifier">$</span><span class="Identifier">alt-repeat-n</span>(<span class="Special">'</span><span class="Constant">p6</span><span class="Special">'</span><span class="Statement">,</span> <span class="Constant">3</span>)<span class="Statement">;</span> <span class="Comment"># 'p6p6p6'</span>
</pre>

      </div>
    </div>
  </body>
</html>
